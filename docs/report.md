Report
======
When you reference the `js/report.js` file, a variable called `nomisReport` is created through which the report functionality can be accessed.

Supported functions
-------------------

## `create` function
Create a templated report in the DOM.

*Arguments*
- `params`: a "Parameters object"

Parameters object
-----------------

*Properties*
- `config`: a "Config object".
- `profile`: a "Template object" - see `docs/template.md` for more information.
- `target`: the DOM element into which the report will be created.
- `lazyload`: if `true`, data is only retrieved when the content is scrolled into view (optional, default is `false`).
- `dao`: a "DAO object" to allow datasources in the template access data.
- `hooks`: a "Hooks object" to allow event intercepts (optional).

Config object
-------------
The config object is used to substitute dynamic properties into the `datasources` entries in the template. This is key to the flexibility of the templated reports as it allows the URLs in the template to be modified based on the requirements of your page (for example, the geographic area that a user has chosen).

Before data is retrieved, the config object properties are iterated over, and any of those containing an array object are substituted into the datasource `url` in place of any `$` prefixed token with matching name in the `url`.

For example:
Given a config object of:
```
config: {
   geography: [ "E03000001" ]
}
```

...and template `datasources` of:
```
datasources: [
   {
      id: 1,
      type: "jsonstat",
      url: "https://www.example.com/data.json?date=APR2019&area=$geography"
   }
]
```

Before the DAO is passed the `url` it will be modified such that `$geography` is substituted with the value `E03000001` and it will become `https://www.example.com/data.json?date=APR2019&area=E03000001`.

DAO object
----------
The properties of this object match up with those required by the template for the `type` from individual `datasources` entries.

*Example*
If for example you are using JSON-stat you could define a property called `jsonstat` with a value of `jsonstatDAO` (the function created by `js/dao-jsonstat.js` to expose the DAO). In your template, you would have a `datasources` entry with a `type` of `jsonstat` so that the report knows which DAO to use to access the data correctly.

Hooks object
------------
Allows automatic event wiring of certain events to your own custom functions.

*Properties*
- `table`: a "Table hooks object".
- `onRenderComplete`: called when the report has finished being created and is displayed in the DOM.
- `popupMessage`: an optional function accepting a `title` and `message` generated by the report to be displayed to the user.

Table hooks object
------------------
Allows events on tables to be captured.

*Properties*
- `columnHeading`: a "columnHeading hook object"

columnHeading hook object
-------------------------
Functions to call upon certain table events on column headings.

### `onclick` function
Called when something is clicked.

*Arguments*
- `colid`: the dimension ID.
- `id`: the ID of the category clicked.
- `label`: the text label in the cell.